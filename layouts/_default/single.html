{{- define "main" }}

<article class="post-single">
    <header class="post-header">
        {{ partial "breadcrumbs.html" . }}
        <h1 class="post-title entry-hint-parent">
            {{ .Title }} {{- if .Draft }}
            <span class="entry-hint" title="Draft">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="35"
                    viewBox="0 -960 960 960"
                    fill="currentColor"
                >
                    <path
                        d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z"
                    />
                </svg>
            </span>
            {{- end }}
        </h1>
        {{- if .Description }}
        <div class="post-description">{{ .Description }}</div>
        {{- end }} {{- if not (.Param "hideMeta") }}
        <div class="post-meta">
            {{- partial "post_meta.html" . -}} {{- partial
            "translation_list.html" . -}} {{- partial "edit_post.html" . -}} {{-
            partial "post_canonical.html" . -}} {{- partial "mermaid.html" . -}}
        </div>
        {{- end }}
    </header>
    {{- $isHidden := (.Param "cover.hiddenInSingle") | default (.Param
    "cover.hidden") | default false }} {{- partial "cover.html" (dict "cxt" .
    "IsSingle" true "isHidden" $isHidden) }} {{- if (.Param "ShowToc") }} {{-
    partial "toc.html" . }} {{- end }} {{- if (.Param "ShowToc") }} {{- partial
    "side-toc.html" . }} {{- end }} {{- if .Content }}
    <div class="post-content">
        {{- if not (.Param "disableAnchoredHeadings") }} {{- partial
        "anchored_headings.html" .Content -}} {{- else }}{{ .Content }}{{ end }}
    </div>
    {{- end }}

    <footer class="post-footer">
        {{- if .Params.references }}
        <div class="post-references">
            <h2>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-link-2"
                >
                    <path
                        d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"
                    ></path>
                    <line x1="8" y1="12" x2="16" y2="12"></line>
                </svg>
                References
            </h2>
            <ul>
                {{- range .Params.references }} {{- $url := urls.Parse .url }}
                {{- $host := $url.Host | replaceRE "^www\\." "" }}
                <li>
                    <a
                        href="{{ .url }}"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        <div class="ref-content">
                            <span class="ref-title">{{- .title -}}</span>
                            {{- if $host }}
                            <span class="ref-source">{{ $host }}</span>
                            {{- end }}
                        </div>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="ref-arrow"
                        >
                            <line x1="7" y1="17" x2="17" y2="7"></line>
                            <polyline points="7 7 17 7 17 17"></polyline>
                        </svg>
                    </a>
                </li>
                {{- end }}
            </ul>
        </div>
        {{- end }} {{- if (.Param "ShowPostNavLinks") }} {{- partial
        "post_nav_links.html" . }} {{- end }} {{- if (and
        site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{-
        partial "share_icons.html" . -}} {{- end }}
    </footer>

    {{- if (.Param "comments") }} {{- partial "comments.html" . }} {{- end }}
</article>

{{- end }}{{/* end main */}}
